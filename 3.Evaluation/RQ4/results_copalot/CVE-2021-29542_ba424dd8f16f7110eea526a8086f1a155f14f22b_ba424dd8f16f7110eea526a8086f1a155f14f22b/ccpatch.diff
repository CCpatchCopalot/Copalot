diff --git a/tensorflow/core/kernels/string_ngrams_op.cc b/tensorflow/core/kernels/string_ngrams_op.cc
old mode 100644
new mode 100755
index 8aed2b3831a..7f3c7852ccb
--- a/tensorflow/core/kernels/string_ngrams_op.cc
+++ b/tensorflow/core/kernels/string_ngrams_op.cc
@@ -178,9 +178,26 @@ class StringNGramsOp : public tensorflow::OpKernel {
         ngram->append(data[data_start_index + n]);
         ngram->append(separator_);
       }
-      ngram->append(data[data_start_index + num_tokens - 1]);
-      for (int n = 0; n < right_padding; ++n) {
-        ngram->append(separator_);
+      // Handle case when there are no tokens or no right padding as these can
+      // result in consecutive separators.
+      if (num_tokens > 0) {
+          // If we have tokens, then output last and then pair each separator with
+          // the right padding that follows, to ensure ngram ends either with the
+          // token or with the right pad.
+          ngram->append(data[data_start_index + num_tokens - 1]);
+          for (int n = 0; n < right_padding; ++n) {
+            ngram->append(separator_);
+            ngram->append(right_pad_);
+          }
+        } else {
+          // If we don't have tokens, then the last item inserted into the ngram
+          // has been the separator from the left padding loop above. Hence,
+          // output right pad and separator and make sure to finish with a
+          // padding, not a separator.
+          for (int n = 0; n < right_padding - 1; ++n) {
+            ngram->append(right_pad_);
+            ngram->append(separator_);
+          }
         ngram->append(right_pad_);
       }
 
