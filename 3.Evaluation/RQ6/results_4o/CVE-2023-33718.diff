diff --git a/src/mp4file_io.cpp b/src/mp4file_io.cpp
index 675ca50..960769e 100644
--- a/src/mp4file_io.cpp
+++ b/src/mp4file_io.cpp
@@ -325,19 +325,26 @@ char* MP4File::ReadString()
 {
     uint32_t length = 0;
     uint32_t alloced = 64;
-    char* data = (char*)MP4Malloc(alloced);
-
-    do {
-        if (length == alloced) {
-            data = (char*)MP4Realloc(data, alloced * 2);
-            if (data == NULL) return NULL;
-            alloced *= 2;
-        }
-        ReadBytes((uint8_t*)&data[length], 1);
-        length++;
-    } while (data[length - 1] != 0);
-
-    data = (char*)MP4Realloc(data, length);
+    char* data = (char*) MP4Malloc(alloced);
+    try {
+        do {
+            if (length == alloced) {
+                data = (char*) MP4Realloc(data, alloced * 2);
+                if (data == NULL)
+                    return NULL;
+                alloced *= 2;
+            }
+            ReadBytes((uint8_t*) &data[length], 1);
+            length++;
+        } while (data[length - 1] != 0);
+
+        data = (char*) MP4Realloc(data, length);
+    }
+    catch (Exception*) {
+        // free memory and rethrow
+        MP4Free(data);
+        throw;
+    }
     return data;
 }