diff --git a/src/postgres/src/bin/psql/common.c b/src/postgres/src/bin/psql/common.c
index 9760010fe563..8c5feee90077 100644
--- a/src/postgres/src/bin/psql/common.c
+++ b/src/postgres/src/bin/psql/common.c
@@ -930,6 +930,17 @@ StoreQueryTuple(const PGresult *result)
 			/* concatenate prefix and column name */
 			varname = psprintf("%s%s", pset.gset_prefix, colname);
 
+			if (VariableHasHook(pset.vars, varname))
+			{
+				/* YB: the following code is commented out since we don't have pg_log_warning macro.
+				 * Porting over pg_log_warning would require other commits which can be done later.
+
+				pg_log_warning("attempt to \\gset into specially treated variable \"%s\" ignored",
+								varname);
+				*/
+				continue;
+			}
+
 			if (!PQgetisnull(result, 0, i))
 				value = PQgetvalue(result, 0, i);
diff --git a/src/postgres/src/bin/psql/variables.c b/src/postgres/src/bin/psql/variables.c
index f09344264439..9fde5d86b161 100644
--- a/src/postgres/src/bin/psql/variables.c
+++ b/src/postgres/src/bin/psql/variables.c
@@ -360,6 +360,32 @@ SetVariableHooks(VariableSpace space, const char *name,
 		(void) (*ahook) (current->value);
 }
 
+/*
+ * Return true iff the named variable has substitute and/or assign hook
+ * functions.
+ */
+bool
+VariableHasHook(VariableSpace space, const char *name)
+{
+	struct _variable *current;
+
+	Assert(space);
+	Assert(name);
+
+	for (current = space->next; current; current = current->next)
+	{
+		int			cmp = strcmp(current->name, name);
+
+		if (cmp == 0)
+			return (current->substitute_hook != NULL ||
+					current->assign_hook != NULL);
+		if (cmp > 0)
+			break;				/* it's not there */
+	}
+
+	return false;
+}
+
 /*
  * Convenience function to set a variable's value to "on".
diff --git a/src/postgres/src/bin/psql/variables.h b/src/postgres/src/bin/psql/variables.h
index 03af11197ca7..383ee1dffb9e 100644
--- a/src/postgres/src/bin/psql/variables.h
+++ b/src/postgres/src/bin/psql/variables.h
@@ -90,6 +90,7 @@ bool		DeleteVariable(VariableSpace space, const char *name);
 void SetVariableHooks(VariableSpace space, const char *name,
 				 VariableSubstituteHook shook,
 				 VariableAssignHook ahook);
+bool		VariableHasHook(VariableSpace space, const char *name);
 
 void		PsqlVarEnumError(const char *name, const char *value, const char *suggestions);
diff --git a/src/postgres/src/test/regress/expected/psql.out b/src/postgres/src/test/regress/expected/psql.out
index 3818cfea7e48..9c389c8f0496 100644
--- a/src/postgres/src/test/regress/expected/psql.out
+++ b/src/postgres/src/test/regress/expected/psql.out
@@ -84,6 +84,10 @@ select 10 as test01, 20 as test02, 'Hello' as test03 \gset pref01_
 select 10 as "bad name"
 \gset
 invalid variable name: "bad name"
+select 97 as "EOF", 'ok' as _foo \gset IGNORE
+attempt to \gset into specially treated variable "IGNOREEOF" ignored
+\echo :IGNORE_foo :IGNOREEOF
+ok 0
 -- multiple backslash commands in one line
 select 1 as x, 2 as y \gset pref01_ \\ \echo :pref01_x
diff --git a/src/postgres/src/test/regress/sql/psql.sql b/src/postgres/src/test/regress/sql/psql.sql
index b45da9bb8dee..7279b9847099 100644
--- a/src/postgres/src/test/regress/sql/psql.sql
+++ b/src/postgres/src/test/regress/sql/psql.sql
@@ -48,6 +48,9 @@ select 10 as test01, 20 as test02, 'Hello' as test03 \gset pref01_
 select 10 as "bad name"
 \gset
 
+select 97 as "EOF", 'ok' as _foo \gset IGNORE
+\echo :IGNORE_foo :IGNOREEOF
+
 -- multiple backslash commands in one line
 select 1 as x, 2 as y \gset pref01_ \\ \echo :pref01_x
 select 3 as x, 4 as y \gset pref01_ \echo :pref01_x \echo :pref01_y