diff --git a/src/revparse.c b/src/revparse.c
--- a/src/revparse.c
+++ b/src/revparse.c
@@ -799,6 +799,9 @@
 			if (temp_object != NULL)
 				base_rev = temp_object;
 			break;
+		} else if (spec[pos+1] == '\0') {
+			spec = "HEAD";
+			break;
 		}
 		/* fall through */
