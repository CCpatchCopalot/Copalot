diff --git a/src/odf/descriptors.c b/src/odf/descriptors.c
index f72755b77..575a679e4 100644
--- a/src/odf/descriptors.c
+++ b/src/odf/descriptors.c
@@ -564,6 +564,8 @@ GF_Err gf_odf_avc_cfg_write_bs(GF_AVCConfig *cfg, GF_BitStream *bs)
 {
 	u32 i, count;
 
+	if (!cfg) return GF_BAD_PARAM;
+	
 	count = gf_list_count(cfg->sequenceParameterSets);
 
 	if (!cfg->write_annex_b) {
