

diff --git a/libr/asm/asm.c b/libr/asm/asm.c
--- a/libr/asm/asm.c
+++ b/libr/asm/asm.c
@@ -477,8 +477,8 @@
 	if (cpylen > 0) {
 		memcpy (op->buf, buf, cpylen);
 		const int addrbytes = a->user ? ((RCore *)a->user)->io->addrbytes : 1;
-		r_hex_bin2str (buf, R_MIN (addrbytes * oplen,
-					(sizeof (op->buf_hex) - 1) / 2), op->buf_hex);
+		int len = R_MIN (addrbytes * oplen, (sizeof (op->buf_hex) - 1) / 2);
+		r_hex_bin2str (op->buf, len, op->buf_hex);
 	}
 	return ret;
 }
